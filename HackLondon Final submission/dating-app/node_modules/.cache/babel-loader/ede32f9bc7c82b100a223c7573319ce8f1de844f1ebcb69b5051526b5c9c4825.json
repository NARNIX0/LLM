{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\omals\\\\Documents\\\\hacklondon 2025\\\\dating-app\\\\src\\\\pages\\\\ConversationScreen.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { Container, Typography, Box, Paper, CircularProgress, Button, Card, CardContent, Avatar, Divider, Grid, Chip } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport PersonIcon from '@mui/icons-material/Person';\nimport StarIcon from '@mui/icons-material/Star';\nimport { simulateConversation } from '../services/api.ts';\nimport { placeholderPersonality, generatePlaceholderConversation } from '../utils/placeholderPersonality.ts';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ConversationScreen = () => {\n  _s();\n  const {\n    matchId\n  } = useParams();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [simulating, setSimulating] = useState(true);\n  const [messages, setMessages] = useState([]);\n  const [compatibilityScore, setCompatibilityScore] = useState(null);\n  const [transcript, setTranscript] = useState('');\n  const [messageCount, setMessageCount] = useState(0);\n  const [showResult, setShowResult] = useState(false);\n  const [assessmentResult, setAssessmentResult] = useState('');\n\n  // Determine if this is a placeholder match\n  const isPlaceholder = matchId === 'placeholder';\n\n  // Hardcoded user IDs for demo - in a real app, these would come from state/context or parameters\n  const user1Id = 1; // Current user\n  const user2Id = parseInt(matchId || '2', 10); // Match user\n\n  // Simulate typing effect for the conversation\n  const simulateTypingEffect = fullTranscript => {\n    // Split the transcript into lines\n    const lines = fullTranscript.trim().split('\\n');\n    let currentMessageIndex = 0;\n\n    // Create a new array of messages from the transcript\n    const newMessages = [];\n\n    // Process each line to determine if it's user1 or user2 speaking\n    lines.forEach(line => {\n      const trimmedLine = line.trim();\n      if (!trimmedLine) return; // Skip empty lines\n\n      if (trimmedLine.startsWith('User 1:')) {\n        newMessages.push({\n          sender: 'user1',\n          text: trimmedLine.substring('User 1:'.length).trim()\n        });\n      } else if (trimmedLine.startsWith('User 2:')) {\n        newMessages.push({\n          sender: 'user2',\n          text: trimmedLine.substring('User 2:'.length).trim()\n        });\n      }\n    });\n\n    // Function to add messages one by one with a delay\n    const addMessageWithDelay = () => {\n      if (currentMessageIndex < newMessages.length) {\n        setMessages(prev => [...prev, newMessages[currentMessageIndex]]);\n        setMessageCount(currentMessageIndex + 1);\n        currentMessageIndex++;\n\n        // Show assessment after 100 messages (50 exchanges)\n        if (currentMessageIndex >= 100) {\n          setSimulating(false);\n          assessConversation();\n        } else {\n          setTimeout(addMessageWithDelay, 1000); // 1 second between messages (accelerated for demo)\n        }\n      } else {\n        setSimulating(false); // Finished simulating\n        if (currentMessageIndex >= 100) {\n          assessConversation();\n        }\n      }\n    };\n\n    // Start adding messages\n    addMessageWithDelay();\n  };\n\n  // Function to assess conversation and generate compatibility report\n  const assessConversation = () => {\n    setShowResult(true);\n\n    // Generate an AI assessment of the conversation\n    const assessmentTexts = [`The conversation between you and ${placeholderPersonality.name} shows a strong mutual interest in understanding each other's perspectives. There's a natural flow in how you both respond to the questions, suggesting good conversational chemistry.`, `I noticed several points of compatibility around values related to ${placeholderPersonality.values[0]} and ${placeholderPersonality.values[2]}. Your communication styles complement each other well, with both of you sharing thoughtful, reflective responses.`, `Based on the conversation transcript, you both appear to share similar views on important life questions, particularly regarding relationships and personal growth. This suggests a foundation for meaningful connection.`, `The compatibility score of ${compatibilityScore}% reflects the alignment in your perspectives, communication patterns, and values revealed through the 36 Questions conversation simulation.`];\n    setAssessmentResult(assessmentTexts.join('\\n\\n'));\n  };\n  useEffect(() => {\n    const fetchConversation = async () => {\n      try {\n        if (isPlaceholder) {\n          // Use the placeholder personality for simulation\n          // In a real app, you'd use the user's actual answers from the database\n          const userAnswers = Array(25).fill(\"That's an interesting question. I'd have to think about it, but my initial reaction is that I value authentic connections and learning from different perspectives.\");\n          const placeholderResult = generatePlaceholderConversation(userAnswers);\n          setCompatibilityScore(placeholderResult.compatibilityScore);\n          setTranscript(placeholderResult.transcript);\n          simulateTypingEffect(placeholderResult.transcript);\n        } else {\n          // Use the API for regular matches\n          const response = await simulateConversation(user1Id, user2Id);\n          setCompatibilityScore(response.compatibilityScore);\n          setTranscript(response.transcript);\n          simulateTypingEffect(response.transcript);\n        }\n      } catch (error) {\n        console.error('Error simulating conversation:', error);\n        // Handle error\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchConversation();\n  }, [user1Id, user2Id, isPlaceholder]);\n  const handleBackToMatches = () => {\n    navigate('/matches');\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        py: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 22\n        }, this),\n        onClick: handleBackToMatches,\n        sx: {\n          mb: 3\n        },\n        children: \"Back to Matches\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        textAlign: \"center\",\n        children: \"AI Conversation Simulation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          my: 8\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 60\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            mb: 4\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 2,\n              alignItems: \"center\",\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 6,\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Avatar, {\n                    sx: {\n                      width: 50,\n                      height: 50,\n                      bgcolor: 'primary.main',\n                      mr: 2\n                    },\n                    children: \"You\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 185,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    children: \"You\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 188,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 184,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 183,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                xs: 6,\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'flex-end'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"h6\",\n                    children: isPlaceholder ? placeholderPersonality.name : `Match #${matchId}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Avatar, {\n                    sx: {\n                      width: 50,\n                      height: 50,\n                      bgcolor: 'secondary.main',\n                      ml: 2\n                    },\n                    children: isPlaceholder ? placeholderPersonality.name.charAt(0) : 'M'\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), isPlaceholder && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 3\n              },\n              children: [/*#__PURE__*/_jsxDEV(Divider, {\n                sx: {\n                  my: 2\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"subtitle1\",\n                gutterBottom: true,\n                children: [\"About \", placeholderPersonality.name, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                container: true,\n                spacing: 2,\n                children: [/*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 6,\n                  children: [/*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      alignItems: 'center',\n                      mb: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(PersonIcon, {\n                      color: \"primary\",\n                      sx: {\n                        mr: 1\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 210,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      children: [\"Age: \", placeholderPersonality.age]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      mb: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      gutterBottom: true,\n                      fontWeight: \"medium\",\n                      children: \"Interests:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 216,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        flexWrap: 'wrap',\n                        gap: 0.5\n                      },\n                      children: placeholderPersonality.interests.map((interest, index) => /*#__PURE__*/_jsxDEV(Chip, {\n                        label: interest,\n                        size: \"small\",\n                        color: \"primary\",\n                        variant: \"outlined\",\n                        sx: {\n                          mb: 0.5\n                        }\n                      }, index, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 221,\n                        columnNumber: 31\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 219,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                  item: true,\n                  xs: 12,\n                  sm: 6,\n                  children: [/*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      mb: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      gutterBottom: true,\n                      fontWeight: \"medium\",\n                      children: \"Personality traits:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 235,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Box, {\n                      sx: {\n                        display: 'flex',\n                        flexWrap: 'wrap',\n                        gap: 0.5\n                      },\n                      children: placeholderPersonality.traits.map((trait, index) => /*#__PURE__*/_jsxDEV(Chip, {\n                        label: trait,\n                        size: \"small\",\n                        color: \"secondary\",\n                        variant: \"outlined\",\n                        sx: {\n                          mb: 0.5\n                        }\n                      }, index, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 31\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 238,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      mt: 1\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Typography, {\n                      variant: \"body2\",\n                      color: \"text.secondary\",\n                      fontSize: \"0.85rem\",\n                      children: placeholderPersonality.backgroundStory\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 252,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 19\n            }, this), compatibilityScore !== null && !simulating && /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                mt: 3\n              },\n              children: [/*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                color: \"error\",\n                sx: {\n                  mr: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"h5\",\n                children: [\"Compatibility Score: \", Math.round(compatibilityScore), \"%\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }, this), simulating && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            mb: 3\n          },\n          children: [/*#__PURE__*/_jsxDEV(CircularProgress, {\n            size: 24,\n            sx: {\n              mr: 2\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            children: [\"Conversation in progress... (\", messageCount, \"/100 messages)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 3,\n          sx: {\n            p: 3,\n            maxHeight: '60vh',\n            overflow: 'auto'\n          },\n          className: \"conversation-container\",\n          children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(Box, {\n            className: `chat-bubble chat-bubble-${message.sender}`,\n            sx: {\n              display: 'flex',\n              flexDirection: 'column',\n              mb: 2,\n              p: 2,\n              borderRadius: 2,\n              maxWidth: '80%',\n              bgcolor: message.sender === 'user1' ? 'primary.light' : 'secondary.light',\n              color: message.sender === 'user1' ? 'primary.contrastText' : 'secondary.contrastText',\n              alignSelf: message.sender === 'user1' ? 'flex-start' : 'flex-end'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"text.secondary\",\n              gutterBottom: true,\n              children: message.sender === 'user1' ? 'You' : placeholderPersonality.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              children: message.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 17\n          }, this)), messages.length === 0 && !loading && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body1\",\n            sx: {\n              textAlign: 'center',\n              color: 'text.secondary'\n            },\n            children: \"No messages yet. The conversation will appear here.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), showResult && /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            mt: 4,\n            mb: 4,\n            p: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h5\",\n              gutterBottom: true,\n              sx: {\n                display: 'flex',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(StarIcon, {\n                color: \"primary\",\n                sx: {\n                  mr: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 21\n              }, this), \"Compatibility Assessment\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {\n              sx: {\n                my: 2\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                whiteSpace: 'pre-line'\n              },\n              children: assessmentResult\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 15\n        }, this), !simulating && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 4,\n            textAlign: 'center'\n          },\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            size: \"large\",\n            onClick: handleBackToMatches,\n            startIcon: /*#__PURE__*/_jsxDEV(FavoriteIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 30\n            }, this),\n            children: \"View All Matches\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 5\n  }, this);\n};\n_s(ConversationScreen, \"HAxv2jTykmyxyEYxPofu5lxBov4=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = ConversationScreen;\nexport default ConversationScreen;\nvar _c;\n$RefreshReg$(_c, \"ConversationScreen\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Typography","Box","Paper","CircularProgress","Button","Card","CardContent","Avatar","Divider","Grid","Chip","ArrowBackIcon","FavoriteIcon","PersonIcon","StarIcon","simulateConversation","placeholderPersonality","generatePlaceholderConversation","jsxDEV","_jsxDEV","Fragment","_Fragment","ConversationScreen","_s","matchId","navigate","loading","setLoading","simulating","setSimulating","messages","setMessages","compatibilityScore","setCompatibilityScore","transcript","setTranscript","messageCount","setMessageCount","showResult","setShowResult","assessmentResult","setAssessmentResult","isPlaceholder","user1Id","user2Id","parseInt","simulateTypingEffect","fullTranscript","lines","trim","split","currentMessageIndex","newMessages","forEach","line","trimmedLine","startsWith","push","sender","text","substring","length","addMessageWithDelay","prev","assessConversation","setTimeout","assessmentTexts","name","values","join","fetchConversation","userAnswers","Array","fill","placeholderResult","response","error","console","handleBackToMatches","maxWidth","children","sx","py","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","mb","variant","component","gutterBottom","textAlign","display","justifyContent","my","size","container","spacing","alignItems","item","xs","width","height","bgcolor","mr","ml","charAt","mt","sm","color","age","fontWeight","flexWrap","gap","interests","map","interest","index","label","traits","trait","fontSize","backgroundStory","Math","round","elevation","p","maxHeight","overflow","className","message","flexDirection","borderRadius","alignSelf","whiteSpace","_c","$RefreshReg$"],"sources":["C:/Users/omals/Documents/hacklondon 2025/dating-app/src/pages/ConversationScreen.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport {\n  Container,\n  Typography,\n  Box,\n  Paper,\n  CircularProgress,\n  Button,\n  Card,\n  CardContent,\n  Avatar,\n  Divider,\n  Grid,\n  Chip,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon\n} from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport PersonIcon from '@mui/icons-material/Person';\nimport StarIcon from '@mui/icons-material/Star';\nimport LocalActivityIcon from '@mui/icons-material/LocalActivity';\nimport ChatIcon from '@mui/icons-material/Chat';\nimport { simulateConversation } from '../services/api.ts';\nimport { placeholderPersonality, generatePlaceholderConversation } from '../utils/placeholderPersonality.ts';\n\ninterface ConversationMessage {\n  sender: 'user1' | 'user2';\n  text: string;\n}\n\nconst ConversationScreen: React.FC = () => {\n  const { matchId } = useParams<{ matchId: string }>();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(true);\n  const [simulating, setSimulating] = useState(true);\n  const [messages, setMessages] = useState<ConversationMessage[]>([]);\n  const [compatibilityScore, setCompatibilityScore] = useState<number | null>(null);\n  const [transcript, setTranscript] = useState<string>('');\n  const [messageCount, setMessageCount] = useState<number>(0);\n  const [showResult, setShowResult] = useState<boolean>(false);\n  const [assessmentResult, setAssessmentResult] = useState<string>('');\n  \n  // Determine if this is a placeholder match\n  const isPlaceholder = matchId === 'placeholder';\n  \n  // Hardcoded user IDs for demo - in a real app, these would come from state/context or parameters\n  const user1Id = 1; // Current user\n  const user2Id = parseInt(matchId || '2', 10); // Match user\n\n  // Simulate typing effect for the conversation\n  const simulateTypingEffect = (fullTranscript: string) => {\n    // Split the transcript into lines\n    const lines = fullTranscript.trim().split('\\n');\n    let currentMessageIndex = 0;\n    \n    // Create a new array of messages from the transcript\n    const newMessages: ConversationMessage[] = [];\n    \n    // Process each line to determine if it's user1 or user2 speaking\n    lines.forEach(line => {\n      const trimmedLine = line.trim();\n      if (!trimmedLine) return; // Skip empty lines\n      \n      if (trimmedLine.startsWith('User 1:')) {\n        newMessages.push({\n          sender: 'user1',\n          text: trimmedLine.substring('User 1:'.length).trim()\n        });\n      } else if (trimmedLine.startsWith('User 2:')) {\n        newMessages.push({\n          sender: 'user2',\n          text: trimmedLine.substring('User 2:'.length).trim()\n        });\n      }\n    });\n    \n    // Function to add messages one by one with a delay\n    const addMessageWithDelay = () => {\n      if (currentMessageIndex < newMessages.length) {\n        setMessages(prev => [...prev, newMessages[currentMessageIndex]]);\n        setMessageCount(currentMessageIndex + 1);\n        currentMessageIndex++;\n        \n        // Show assessment after 100 messages (50 exchanges)\n        if (currentMessageIndex >= 100) {\n          setSimulating(false);\n          assessConversation();\n        } else {\n          setTimeout(addMessageWithDelay, 1000); // 1 second between messages (accelerated for demo)\n        }\n      } else {\n        setSimulating(false); // Finished simulating\n        if (currentMessageIndex >= 100) {\n          assessConversation();\n        }\n      }\n    };\n    \n    // Start adding messages\n    addMessageWithDelay();\n  };\n\n  // Function to assess conversation and generate compatibility report\n  const assessConversation = () => {\n    setShowResult(true);\n    \n    // Generate an AI assessment of the conversation\n    const assessmentTexts = [\n      `The conversation between you and ${placeholderPersonality.name} shows a strong mutual interest in understanding each other's perspectives. There's a natural flow in how you both respond to the questions, suggesting good conversational chemistry.`,\n      \n      `I noticed several points of compatibility around values related to ${placeholderPersonality.values[0]} and ${placeholderPersonality.values[2]}. Your communication styles complement each other well, with both of you sharing thoughtful, reflective responses.`,\n      \n      `Based on the conversation transcript, you both appear to share similar views on important life questions, particularly regarding relationships and personal growth. This suggests a foundation for meaningful connection.`,\n      \n      `The compatibility score of ${compatibilityScore}% reflects the alignment in your perspectives, communication patterns, and values revealed through the 36 Questions conversation simulation.`\n    ];\n    \n    setAssessmentResult(assessmentTexts.join('\\n\\n'));\n  };\n\n  useEffect(() => {\n    const fetchConversation = async () => {\n      try {\n        if (isPlaceholder) {\n          // Use the placeholder personality for simulation\n          // In a real app, you'd use the user's actual answers from the database\n          const userAnswers = Array(25).fill(\"That's an interesting question. I'd have to think about it, but my initial reaction is that I value authentic connections and learning from different perspectives.\");\n          \n          const placeholderResult = generatePlaceholderConversation(userAnswers);\n          setCompatibilityScore(placeholderResult.compatibilityScore);\n          setTranscript(placeholderResult.transcript);\n          simulateTypingEffect(placeholderResult.transcript);\n        } else {\n          // Use the API for regular matches\n          const response = await simulateConversation(user1Id, user2Id);\n          setCompatibilityScore(response.compatibilityScore);\n          setTranscript(response.transcript);\n          simulateTypingEffect(response.transcript);\n        }\n      } catch (error) {\n        console.error('Error simulating conversation:', error);\n        // Handle error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchConversation();\n  }, [user1Id, user2Id, isPlaceholder]);\n\n  const handleBackToMatches = () => {\n    navigate('/matches');\n  };\n\n  return (\n    <Container maxWidth=\"md\">\n      <Box sx={{ py: 4 }}>\n        <Button \n          startIcon={<ArrowBackIcon />} \n          onClick={handleBackToMatches}\n          sx={{ mb: 3 }}\n        >\n          Back to Matches\n        </Button>\n\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom textAlign=\"center\">\n          AI Conversation Simulation\n        </Typography>\n\n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', my: 8 }}>\n            <CircularProgress size={60} />\n          </Box>\n        ) : (\n          <>\n            <Card sx={{ mb: 4 }}>\n              <CardContent>\n                <Grid container spacing={2} alignItems=\"center\">\n                  <Grid item xs={6}>\n                    <Box sx={{ display: 'flex', alignItems: 'center' }}>\n                      <Avatar sx={{ width: 50, height: 50, bgcolor: 'primary.main', mr: 2 }}>\n                        You\n                      </Avatar>\n                      <Typography variant=\"h6\">You</Typography>\n                    </Box>\n                  </Grid>\n                  <Grid item xs={6}>\n                    <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n                      <Typography variant=\"h6\">{isPlaceholder ? placeholderPersonality.name : `Match #${matchId}`}</Typography>\n                      <Avatar sx={{ width: 50, height: 50, bgcolor: 'secondary.main', ml: 2 }}>\n                        {isPlaceholder ? placeholderPersonality.name.charAt(0) : 'M'}\n                      </Avatar>\n                    </Box>\n                  </Grid>\n                </Grid>\n                \n                {isPlaceholder && (\n                  <Box sx={{ mt: 3 }}>\n                    <Divider sx={{ my: 2 }} />\n                    <Typography variant=\"subtitle1\" gutterBottom>\n                      About {placeholderPersonality.name}:\n                    </Typography>\n                    <Grid container spacing={2}>\n                      <Grid item xs={12} sm={6}>\n                        <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                          <PersonIcon color=\"primary\" sx={{ mr: 1 }} />\n                          <Typography variant=\"body2\">\n                            Age: {placeholderPersonality.age}\n                          </Typography>\n                        </Box>\n                        <Box sx={{ mb: 1 }}>\n                          <Typography variant=\"body2\" gutterBottom fontWeight=\"medium\">\n                            Interests:\n                          </Typography>\n                          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                            {placeholderPersonality.interests.map((interest, index) => (\n                              <Chip \n                                key={index}\n                                label={interest}\n                                size=\"small\"\n                                color=\"primary\"\n                                variant=\"outlined\"\n                                sx={{ mb: 0.5 }}\n                              />\n                            ))}\n                          </Box>\n                        </Box>\n                      </Grid>\n                      <Grid item xs={12} sm={6}>\n                        <Box sx={{ mb: 1 }}>\n                          <Typography variant=\"body2\" gutterBottom fontWeight=\"medium\">\n                            Personality traits:\n                          </Typography>\n                          <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\n                            {placeholderPersonality.traits.map((trait, index) => (\n                              <Chip \n                                key={index}\n                                label={trait}\n                                size=\"small\"\n                                color=\"secondary\"\n                                variant=\"outlined\"\n                                sx={{ mb: 0.5 }}\n                              />\n                            ))}\n                          </Box>\n                        </Box>\n                        <Box sx={{ mt: 1 }}>\n                          <Typography variant=\"body2\" color=\"text.secondary\" fontSize=\"0.85rem\">\n                            {placeholderPersonality.backgroundStory}\n                          </Typography>\n                        </Box>\n                      </Grid>\n                    </Grid>\n                  </Box>\n                )}\n                \n                {compatibilityScore !== null && !simulating && (\n                  <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mt: 3 }}>\n                    <FavoriteIcon color=\"error\" sx={{ mr: 1 }} />\n                    <Typography variant=\"h5\">\n                      Compatibility Score: {Math.round(compatibilityScore)}%\n                    </Typography>\n                  </Box>\n                )}\n              </CardContent>\n            </Card>\n            \n            {simulating && (\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', mb: 3 }}>\n                <CircularProgress size={24} sx={{ mr: 2 }} />\n                <Typography variant=\"body1\">\n                  Conversation in progress... ({messageCount}/100 messages)\n                </Typography>\n              </Box>\n            )}\n\n            <Paper elevation={3} sx={{ p: 3, maxHeight: '60vh', overflow: 'auto' }} className=\"conversation-container\">\n              {messages.map((message, index) => (\n                <Box \n                  key={index}\n                  className={`chat-bubble chat-bubble-${message.sender}`}\n                  sx={{ \n                    display: 'flex',\n                    flexDirection: 'column',\n                    mb: 2,\n                    p: 2,\n                    borderRadius: 2,\n                    maxWidth: '80%',\n                    bgcolor: message.sender === 'user1' ? 'primary.light' : 'secondary.light',\n                    color: message.sender === 'user1' ? 'primary.contrastText' : 'secondary.contrastText',\n                    alignSelf: message.sender === 'user1' ? 'flex-start' : 'flex-end',\n                  }}\n                >\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\n                    {message.sender === 'user1' ? 'You' : placeholderPersonality.name}\n                  </Typography>\n                  <Typography variant=\"body1\">\n                    {message.text}\n                  </Typography>\n                </Box>\n              ))}\n              \n              {messages.length === 0 && !loading && (\n                <Typography variant=\"body1\" sx={{ textAlign: 'center', color: 'text.secondary' }}>\n                  No messages yet. The conversation will appear here.\n                </Typography>\n              )}\n            </Paper>\n\n            {showResult && (\n              <Card sx={{ mt: 4, mb: 4, p: 2 }}>\n                <CardContent>\n                  <Typography variant=\"h5\" gutterBottom sx={{ display: 'flex', alignItems: 'center' }}>\n                    <StarIcon color=\"primary\" sx={{ mr: 1 }} />\n                    Compatibility Assessment\n                  </Typography>\n                  <Divider sx={{ my: 2 }} />\n                  <Typography variant=\"body1\" sx={{ whiteSpace: 'pre-line' }}>\n                    {assessmentResult}\n                  </Typography>\n                </CardContent>\n              </Card>\n            )}\n\n            {!simulating && (\n              <Box sx={{ mt: 4, textAlign: 'center' }}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  size=\"large\"\n                  onClick={handleBackToMatches}\n                  startIcon={<FavoriteIcon />}\n                >\n                  View All Matches\n                </Button>\n              </Box>\n            )}\n          </>\n        )}\n      </Box>\n    </Container>\n  );\n};\n\nexport default ConversationScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}