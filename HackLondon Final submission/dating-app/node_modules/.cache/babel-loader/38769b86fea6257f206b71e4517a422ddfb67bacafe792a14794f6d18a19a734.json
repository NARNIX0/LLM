{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\omals\\\\Documents\\\\GitHub\\\\LLM\\\\HackLondon Final submission\\\\dating-app\\\\src\\\\pages\\\\AIChatSimulation.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Container, Typography, Box, Paper, Avatar, Button, CircularProgress, Alert } from '@mui/material';\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\nimport Groq from 'groq-sdk';\n\n// Type declaration for TypeScript\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n// Mock Groq client for development\nconst groq = new Groq({\n  apiKey: process.env.REACT_APP_GROQ_API_KEY || '',\n  dangerouslyAllowBrowser: true\n});\n\n// Define personality types\nconst personalities = [{\n  name: \"Alex\",\n  avatar: \"A\",\n  color: \"#3f51b5\",\n  systemPrompt: \"You are Alex, a thoughtful and creative person who loves art, literature, and philosophical discussions. You are introspective, kind, and curious about the world. You enjoy deep conversations and asking thought-provoking questions. You speak in a warm, articulate manner and occasionally reference books or art you enjoy. Keep your responses under 100 words.\"\n}, {\n  name: \"Jordan\",\n  avatar: \"J\",\n  color: \"#f50057\",\n  systemPrompt: \"You are Jordan, an energetic and adventurous person who loves outdoor activities, travel, and trying new experiences. You're outgoing, enthusiastic, and have a good sense of humor. You speak in a lively, expressive way and often share stories of your adventures or things you'd like to try. You're optimistic and encouraging of others. Keep your responses under 100 words.\"\n}];\n\n// Sample conversation starters\nconst conversationStarters = [\"What do you think gives life meaning?\", \"If you could travel anywhere, where would you go and why?\", \"What's something you've changed your mind about recently?\", \"Do you think technology is bringing people closer together or pushing them apart?\", \"What's a book or movie that changed how you see the world?\"];\nconst AIChatSimulation = () => {\n  _s();\n  const navigate = useNavigate();\n  const [messages, setMessages] = useState([]);\n  const [isSimulating, setIsSimulating] = useState(false);\n  const [conversationStarted, setConversationStarted] = useState(false);\n  const [messageCount, setMessageCount] = useState({\n    0: 0,\n    1: 0\n  });\n  const [error, setError] = useState(null);\n  const [isApiReady, setIsApiReady] = useState(true);\n  const messagesEndRef = useRef(null);\n\n  // Function to generate a response using Groq API\n  const generateResponse = async (personalityIndex, context) => {\n    const personality = personalities[personalityIndex];\n    console.log(`Generating response for ${personality.name} with context:`, context);\n\n    // For debugging purposes, let's create a hardcoded response first to test the flow\n    const hardcodedResponses = {\n      0: [\"I find meaning in connection and creative expression. Art and literature allow us to explore the depths of human experience in ways that resonate beyond words.\", \"What a fascinating question. I believe meaning emerges from our relationships and how we contribute to something larger than ourselves.\"],\n      1: [\"Life is all about experiences! I find meaning in pushing boundaries, exploring new places, and connecting with people from all walks of life.\", \"For me, meaning comes from adventure and growth. Every challenge I overcome adds another chapter to my story!\"]\n    };\n\n    // Return a hardcoded response first to debug the UI flow\n    console.log(\"Using hardcoded response for now to debug UI flow\");\n    return hardcodedResponses[personalityIndex][Math.floor(Math.random() * 2)];\n\n    // Once UI flow is working, uncomment this section to use the actual API\n    /*\r\n    try {\r\n      // Format the conversation history for context\r\n      const conversationHistory = context.map((msg, i) => {\r\n        const role = i % 2 === 0 ? \r\n          (personalityIndex === 0 ? personalities[1].name : personalities[0].name) : \r\n          personality.name;\r\n        return `${role}: ${msg}`;\r\n      }).join('\\n');\r\n      \r\n      // Make the API call to Groq\r\n      const completion = await groq.chat.completions.create({\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: personality.systemPrompt\r\n          },\r\n          {\r\n            role: \"user\",\r\n            content: `You are having a conversation with ${personalityIndex === 0 ? personalities[1].name : personalities[0].name}. Here is the conversation so far:\\n\\n${conversationHistory}\\n\\nRespond to the last message as ${personality.name}. Keep your response under 80 words and stay in character.`\r\n          }\r\n        ],\r\n        model: \"llama-3-8b-8192\",\r\n        temperature: 0.7,\r\n        max_tokens: 200,\r\n        top_p: 1,\r\n      });\r\n      \r\n      // Extract and validate response\r\n      const responseText = completion.choices[0]?.message?.content;\r\n      if (!responseText || responseText.trim() === '') {\r\n        throw new Error(\"Empty response received\");\r\n      }\r\n      \r\n      return responseText;\r\n    } catch (err) {\r\n      console.error(\"Error generating response:\", err);\r\n      \r\n      // More robust fallback based on personality\r\n      const fallbacks = personalityIndex === 0 ? [\r\n        \"I find this conversation fascinating. The way we connect through ideas is what gives meaning to our interactions.\",\r\n        \"That's an intriguing perspective. It reminds me of something I read recently about human connection.\",\r\n        \"I've been reflecting on what you said. There's a deeper truth there that resonates with me.\"\r\n      ] : [\r\n        \"That's awesome! I had a similar experience when I was hiking in the mountains last summer.\",\r\n        \"I totally get what you mean! Life is all about seizing opportunities and making memories.\",\r\n        \"That's such an interesting take! I'm always looking for new adventures that challenge my perspective.\"\r\n      ];\r\n      \r\n      return fallbacks[Math.floor(Math.random() * fallbacks.length)];\r\n    }\r\n    */\n  };\n\n  // Scroll to bottom of message container\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n\n  // Verify API key is present\n  useEffect(() => {\n    if (!process.env.REACT_APP_GROQ_API_KEY) {\n      setIsApiReady(false);\n      setError(\"Groq API key not found. Using pre-written responses instead.\");\n    }\n  }, []);\n\n  // Add this after checking if API key exists\n  useEffect(() => {\n    // Log API status without revealing the key\n    console.log(\"API Key present:\", !!process.env.REACT_APP_GROQ_API_KEY);\n\n    // Try to verify API access at component mount\n    const verifyApiAccess = async () => {\n      try {\n        // Test API with a simple prompt\n        await groq.chat.completions.create({\n          messages: [{\n            role: \"user\",\n            content: \"Hello\"\n          }],\n          model: \"llama-3-8b-8192\",\n          max_tokens: 10\n        });\n        setIsApiReady(true);\n      } catch (err) {\n        console.error(\"Failed to connect to Groq API:\", err);\n        setIsApiReady(false);\n        setError(\"Could not connect to Groq API. Please check your API key.\");\n      }\n    };\n    if (process.env.REACT_APP_GROQ_API_KEY) {\n      verifyApiAccess();\n    }\n  }, []);\n\n  // Start the conversation\n  const startConversation = () => {\n    console.log(\"Starting conversation...\");\n    setIsSimulating(true);\n    setConversationStarted(true);\n    setMessages([]);\n    setMessageCount({\n      0: 0,\n      1: 0\n    });\n    setError(null);\n\n    // Start with a random conversation opener from personality 0\n    const starter = conversationStarters[Math.floor(Math.random() * conversationStarters.length)];\n    console.log(\"Initial message:\", starter);\n\n    // Directly add the first message - this was working before\n    setMessages([{\n      sender: 0,\n      text: starter\n    }]);\n    setMessageCount(prev => ({\n      ...prev,\n      0: 1\n    }));\n\n    // Continue the conversation after a delay\n    setTimeout(() => {\n      console.log(\"Calling continueConversation with sender 0\");\n      continueConversation(0);\n    }, 300);\n  };\n\n  // Function to continue the conversation\n  const continueConversation = async lastSender => {\n    console.log(\"â© Continuing conversation, last sender:\", lastSender);\n    if (!isSimulating) {\n      console.log(\"âŒ Not simulating, returning\");\n      return;\n    }\n    try {\n      // Determine next sender\n      const nextSender = lastSender === 0 ? 1 : 0;\n      console.log(`ðŸŽ­ Next sender will be: ${personalities[nextSender].name}`);\n\n      // Check if we've reached message limit\n      if (messageCount[nextSender] >= 25) {\n        console.log(\"ðŸ›‘ Message limit reached, stopping simulation\");\n        setIsSimulating(false);\n        return;\n      }\n\n      // Get conversation context\n      const context = messages.map(m => m.text);\n      console.log(\"ðŸ’¬ Context for next message:\", context);\n\n      // Show typing indicator\n      console.log(\"âŒ¨ï¸ Adding typing indicator\");\n\n      // Use a simpler state update approach\n      const updatedMessages = [...messages, {\n        sender: nextSender,\n        text: \"...\"\n      }];\n      setMessages(updatedMessages);\n      console.log(\"ðŸ“ Added typing indicator, messages now:\", updatedMessages);\n\n      // Force UI update before proceeding\n      await new Promise(resolve => setTimeout(resolve, 50));\n\n      // Get response\n      console.log(\"ðŸ¤– Getting AI response\");\n      const response = await generateResponse(nextSender, context);\n      console.log(\"âœ… Got response:\", response);\n\n      // Create final message list with real response\n      const finalMessages = [...messages, {\n        sender: nextSender,\n        text: response\n      }];\n      console.log(\"ðŸ“ Setting final messages:\", finalMessages);\n\n      // Update state directly instead of manipulating previous state\n      setMessages(finalMessages);\n\n      // Update count separately\n      const newCounts = {\n        ...messageCount\n      };\n      newCounts[nextSender] += 1;\n      console.log(\"ðŸ”¢ Updating message count to:\", newCounts);\n      setMessageCount(newCounts);\n\n      // Force UI update again\n      await new Promise(resolve => setTimeout(resolve, 50));\n\n      // Continue the conversation with a longer delay\n      console.log(\"â±ï¸ Scheduling next message\");\n      setTimeout(() => {\n        continueConversation(nextSender);\n      }, 1000); // Longer delay for readability\n    } catch (err) {\n      console.error(\"ðŸ’¥ Fatal error in conversation flow:\", err);\n      setError(\"Conversation error: \" + (err.message || \"Unknown error\"));\n      setIsSimulating(false);\n    }\n  };\n\n  // Make sure we're catching and displaying all errors\n  useEffect(() => {\n    // Add a global error handler\n    const handleError = error => {\n      console.error(\"Global error:\", error);\n      setError(\"An error occurred: \" + error.message);\n      setIsSimulating(false);\n    };\n    window.addEventListener('error', handleError);\n    return () => window.removeEventListener('error', handleError);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        py: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        startIcon: /*#__PURE__*/_jsxDEV(ArrowBackIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 22\n        }, this),\n        onClick: () => navigate('/'),\n        sx: {\n          mb: 3\n        },\n        children: \"Back to Home\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        gutterBottom: true,\n        textAlign: \"center\",\n        children: \"AI Match Simulation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body1\",\n        color: \"text.secondary\",\n        paragraph: true,\n        textAlign: \"center\",\n        children: \"Watch as two AI personalities have a conversation to see how our matching system works. Each AI has a distinct personality and communication style.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"warning\",\n        sx: {\n          mb: 2\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this), !conversationStarted && /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          my: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          size: \"large\",\n          startIcon: /*#__PURE__*/_jsxDEV(PlayArrowIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 26\n          }, this),\n          onClick: () => {\n            // Just call startConversation directly - don't add test messages\n            startConversation();\n          },\n          sx: {\n            py: 2,\n            px: 4\n          },\n          children: \"Start AI Conversation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }, this), conversationStarted && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            mb: 2,\n            mt: 4\n          },\n          children: personalities.map((personality, index) => /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              sx: {\n                bgcolor: personality.color,\n                mr: 1\n              },\n              children: personality.avatar\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"subtitle1\",\n              children: personality.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 3,\n          sx: {\n            height: '60vh',\n            overflowY: 'auto',\n            p: 2,\n            backgroundColor: '#f5f5f5'\n          },\n          children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: message.sender === 0 ? 'flex-start' : 'flex-end',\n              mb: 2\n            },\n            children: /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                maxWidth: '70%',\n                bgcolor: message.sender === 0 ? personalities[0].color : personalities[1].color,\n                color: 'white',\n                p: 2,\n                borderRadius: 2\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body1\",\n                children: message.text === \"...\" ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                  size: 16,\n                  color: \"inherit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 377,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"caption\",\n                    sx: {\n                      display: 'block',\n                      opacity: 0.8,\n                      mb: 0.5\n                    },\n                    children: personalities[message.sender].name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 380,\n                    columnNumber: 27\n                  }, this), message.text]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 17\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            mt: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: [personalities[0].name, \": \", messageCount[0], \"/25 messages\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            children: [personalities[1].name, \": \", messageCount[1], \"/25 messages\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this), !isSimulating && conversationStarted && /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            mt: 3,\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            gutterBottom: true,\n            children: \"Conversation Complete!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 405,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            color: \"primary\",\n            onClick: () => navigate('/create-profile'),\n            sx: {\n              mt: 2,\n              mr: 2\n            },\n            children: \"Create Your Profile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            color: \"secondary\",\n            onClick: startConversation,\n            sx: {\n              mt: 2\n            },\n            children: \"Start New Conversation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 416,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 287,\n    columnNumber: 5\n  }, this);\n};\n_s(AIChatSimulation, \"C1FQgjYjHCmZDiPDctlcukqj6sc=\", false, function () {\n  return [useNavigate];\n});\n_c = AIChatSimulation;\nexport default AIChatSimulation;\nvar _c;\n$RefreshReg$(_c, \"AIChatSimulation\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","Container","Typography","Box","Paper","Avatar","Button","CircularProgress","Alert","ArrowBackIcon","PlayArrowIcon","Groq","jsxDEV","_jsxDEV","Fragment","_Fragment","groq","apiKey","process","env","REACT_APP_GROQ_API_KEY","dangerouslyAllowBrowser","personalities","name","avatar","color","systemPrompt","conversationStarters","AIChatSimulation","_s","navigate","messages","setMessages","isSimulating","setIsSimulating","conversationStarted","setConversationStarted","messageCount","setMessageCount","error","setError","isApiReady","setIsApiReady","messagesEndRef","generateResponse","personalityIndex","context","personality","console","log","hardcodedResponses","Math","floor","random","_messagesEndRef$curre","current","scrollIntoView","behavior","verifyApiAccess","chat","completions","create","role","content","model","max_tokens","err","startConversation","starter","length","sender","text","prev","setTimeout","continueConversation","lastSender","nextSender","map","m","updatedMessages","Promise","resolve","response","finalMessages","newCounts","message","handleError","window","addEventListener","removeEventListener","maxWidth","children","sx","py","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","mb","variant","gutterBottom","textAlign","paragraph","severity","display","justifyContent","my","size","px","mt","index","alignItems","bgcolor","mr","elevation","height","overflowY","p","backgroundColor","borderRadius","opacity","ref","_c","$RefreshReg$"],"sources":["C:/Users/omals/Documents/GitHub/LLM/HackLondon Final submission/dating-app/src/pages/AIChatSimulation.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Box,\r\n  Paper,\r\n  Avatar,\r\n  Button,\r\n  CircularProgress,\r\n  Divider,\r\n  Alert\r\n} from '@mui/material';\r\nimport ArrowBackIcon from '@mui/icons-material/ArrowBack';\r\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\r\nimport Groq from 'groq-sdk';\r\n\r\n// Type declaration for TypeScript\r\ndeclare const process: any;\r\n\r\n// Mock Groq client for development\r\nconst groq = new Groq({\r\n  apiKey: process.env.REACT_APP_GROQ_API_KEY || '',\r\n  dangerouslyAllowBrowser: true\r\n});\r\n\r\n// Define personality types\r\nconst personalities = [\r\n  {\r\n    name: \"Alex\",\r\n    avatar: \"A\",\r\n    color: \"#3f51b5\",\r\n    systemPrompt: \"You are Alex, a thoughtful and creative person who loves art, literature, and philosophical discussions. You are introspective, kind, and curious about the world. You enjoy deep conversations and asking thought-provoking questions. You speak in a warm, articulate manner and occasionally reference books or art you enjoy. Keep your responses under 100 words.\"\r\n  },\r\n  {\r\n    name: \"Jordan\",\r\n    avatar: \"J\",\r\n    color: \"#f50057\",\r\n    systemPrompt: \"You are Jordan, an energetic and adventurous person who loves outdoor activities, travel, and trying new experiences. You're outgoing, enthusiastic, and have a good sense of humor. You speak in a lively, expressive way and often share stories of your adventures or things you'd like to try. You're optimistic and encouraging of others. Keep your responses under 100 words.\"\r\n  }\r\n];\r\n\r\n// Sample conversation starters\r\nconst conversationStarters = [\r\n  \"What do you think gives life meaning?\",\r\n  \"If you could travel anywhere, where would you go and why?\",\r\n  \"What's something you've changed your mind about recently?\",\r\n  \"Do you think technology is bringing people closer together or pushing them apart?\",\r\n  \"What's a book or movie that changed how you see the world?\"\r\n];\r\n\r\nconst AIChatSimulation = () => {\r\n  const navigate = useNavigate();\r\n  const [messages, setMessages] = useState<{sender: number, text: string}[]>([]);\r\n  const [isSimulating, setIsSimulating] = useState(false);\r\n  const [conversationStarted, setConversationStarted] = useState(false);\r\n  const [messageCount, setMessageCount] = useState({ 0: 0, 1: 0 });\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [isApiReady, setIsApiReady] = useState(true);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  \r\n  // Function to generate a response using Groq API\r\n  const generateResponse = async (personalityIndex: number, context: string[]) => {\r\n    const personality = personalities[personalityIndex];\r\n    console.log(`Generating response for ${personality.name} with context:`, context);\r\n    \r\n    // For debugging purposes, let's create a hardcoded response first to test the flow\r\n    const hardcodedResponses = {\r\n      0: [\r\n        \"I find meaning in connection and creative expression. Art and literature allow us to explore the depths of human experience in ways that resonate beyond words.\",\r\n        \"What a fascinating question. I believe meaning emerges from our relationships and how we contribute to something larger than ourselves.\"\r\n      ],\r\n      1: [\r\n        \"Life is all about experiences! I find meaning in pushing boundaries, exploring new places, and connecting with people from all walks of life.\",\r\n        \"For me, meaning comes from adventure and growth. Every challenge I overcome adds another chapter to my story!\"\r\n      ]\r\n    };\r\n    \r\n    // Return a hardcoded response first to debug the UI flow\r\n    console.log(\"Using hardcoded response for now to debug UI flow\");\r\n    return hardcodedResponses[personalityIndex][Math.floor(Math.random() * 2)];\r\n    \r\n    // Once UI flow is working, uncomment this section to use the actual API\r\n    /*\r\n    try {\r\n      // Format the conversation history for context\r\n      const conversationHistory = context.map((msg, i) => {\r\n        const role = i % 2 === 0 ? \r\n          (personalityIndex === 0 ? personalities[1].name : personalities[0].name) : \r\n          personality.name;\r\n        return `${role}: ${msg}`;\r\n      }).join('\\n');\r\n      \r\n      // Make the API call to Groq\r\n      const completion = await groq.chat.completions.create({\r\n        messages: [\r\n          {\r\n            role: \"system\",\r\n            content: personality.systemPrompt\r\n          },\r\n          {\r\n            role: \"user\",\r\n            content: `You are having a conversation with ${personalityIndex === 0 ? personalities[1].name : personalities[0].name}. Here is the conversation so far:\\n\\n${conversationHistory}\\n\\nRespond to the last message as ${personality.name}. Keep your response under 80 words and stay in character.`\r\n          }\r\n        ],\r\n        model: \"llama-3-8b-8192\",\r\n        temperature: 0.7,\r\n        max_tokens: 200,\r\n        top_p: 1,\r\n      });\r\n      \r\n      // Extract and validate response\r\n      const responseText = completion.choices[0]?.message?.content;\r\n      if (!responseText || responseText.trim() === '') {\r\n        throw new Error(\"Empty response received\");\r\n      }\r\n      \r\n      return responseText;\r\n    } catch (err) {\r\n      console.error(\"Error generating response:\", err);\r\n      \r\n      // More robust fallback based on personality\r\n      const fallbacks = personalityIndex === 0 ? [\r\n        \"I find this conversation fascinating. The way we connect through ideas is what gives meaning to our interactions.\",\r\n        \"That's an intriguing perspective. It reminds me of something I read recently about human connection.\",\r\n        \"I've been reflecting on what you said. There's a deeper truth there that resonates with me.\"\r\n      ] : [\r\n        \"That's awesome! I had a similar experience when I was hiking in the mountains last summer.\",\r\n        \"I totally get what you mean! Life is all about seizing opportunities and making memories.\",\r\n        \"That's such an interesting take! I'm always looking for new adventures that challenge my perspective.\"\r\n      ];\r\n      \r\n      return fallbacks[Math.floor(Math.random() * fallbacks.length)];\r\n    }\r\n    */\r\n  };\r\n  \r\n  // Scroll to bottom of message container\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n  \r\n  // Verify API key is present\r\n  useEffect(() => {\r\n    if (!process.env.REACT_APP_GROQ_API_KEY) {\r\n      setIsApiReady(false);\r\n      setError(\"Groq API key not found. Using pre-written responses instead.\");\r\n    }\r\n  }, []);\r\n  \r\n  // Add this after checking if API key exists\r\n  useEffect(() => {\r\n    // Log API status without revealing the key\r\n    console.log(\"API Key present:\", !!process.env.REACT_APP_GROQ_API_KEY);\r\n    \r\n    // Try to verify API access at component mount\r\n    const verifyApiAccess = async () => {\r\n      try {\r\n        // Test API with a simple prompt\r\n        await groq.chat.completions.create({\r\n          messages: [\r\n            { role: \"user\", content: \"Hello\" }\r\n          ],\r\n          model: \"llama-3-8b-8192\",\r\n          max_tokens: 10,\r\n        });\r\n        setIsApiReady(true);\r\n      } catch (err) {\r\n        console.error(\"Failed to connect to Groq API:\", err);\r\n        setIsApiReady(false);\r\n        setError(\"Could not connect to Groq API. Please check your API key.\");\r\n      }\r\n    };\r\n    \r\n    if (process.env.REACT_APP_GROQ_API_KEY) {\r\n      verifyApiAccess();\r\n    }\r\n  }, []);\r\n  \r\n  // Start the conversation\r\n  const startConversation = () => {\r\n    console.log(\"Starting conversation...\");\r\n    setIsSimulating(true);\r\n    setConversationStarted(true);\r\n    setMessages([]);\r\n    setMessageCount({ 0: 0, 1: 0 });\r\n    setError(null);\r\n    \r\n    // Start with a random conversation opener from personality 0\r\n    const starter = conversationStarters[Math.floor(Math.random() * conversationStarters.length)];\r\n    console.log(\"Initial message:\", starter);\r\n    \r\n    // Directly add the first message - this was working before\r\n    setMessages([{ sender: 0, text: starter }]);\r\n    setMessageCount(prev => ({ ...prev, 0: 1 }));\r\n    \r\n    // Continue the conversation after a delay\r\n    setTimeout(() => {\r\n      console.log(\"Calling continueConversation with sender 0\");\r\n      continueConversation(0);\r\n    }, 300);\r\n  };\r\n  \r\n  // Function to continue the conversation\r\n  const continueConversation = async (lastSender: number) => {\r\n    console.log(\"â© Continuing conversation, last sender:\", lastSender);\r\n    \r\n    if (!isSimulating) {\r\n      console.log(\"âŒ Not simulating, returning\");\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // Determine next sender\r\n      const nextSender = lastSender === 0 ? 1 : 0;\r\n      console.log(`ðŸŽ­ Next sender will be: ${personalities[nextSender].name}`);\r\n      \r\n      // Check if we've reached message limit\r\n      if (messageCount[nextSender] >= 25) {\r\n        console.log(\"ðŸ›‘ Message limit reached, stopping simulation\");\r\n        setIsSimulating(false);\r\n        return;\r\n      }\r\n      \r\n      // Get conversation context\r\n      const context = messages.map(m => m.text);\r\n      console.log(\"ðŸ’¬ Context for next message:\", context);\r\n      \r\n      // Show typing indicator\r\n      console.log(\"âŒ¨ï¸ Adding typing indicator\");\r\n      \r\n      // Use a simpler state update approach\r\n      const updatedMessages = [...messages, { sender: nextSender, text: \"...\" }];\r\n      setMessages(updatedMessages);\r\n      console.log(\"ðŸ“ Added typing indicator, messages now:\", updatedMessages);\r\n      \r\n      // Force UI update before proceeding\r\n      await new Promise(resolve => setTimeout(resolve, 50));\r\n      \r\n      // Get response\r\n      console.log(\"ðŸ¤– Getting AI response\");\r\n      const response = await generateResponse(nextSender, context);\r\n      console.log(\"âœ… Got response:\", response);\r\n      \r\n      // Create final message list with real response\r\n      const finalMessages = [...messages, { sender: nextSender, text: response }];\r\n      console.log(\"ðŸ“ Setting final messages:\", finalMessages);\r\n      \r\n      // Update state directly instead of manipulating previous state\r\n      setMessages(finalMessages);\r\n      \r\n      // Update count separately\r\n      const newCounts = { ...messageCount };\r\n      newCounts[nextSender] += 1;\r\n      console.log(\"ðŸ”¢ Updating message count to:\", newCounts);\r\n      setMessageCount(newCounts);\r\n      \r\n      // Force UI update again\r\n      await new Promise(resolve => setTimeout(resolve, 50));\r\n      \r\n      // Continue the conversation with a longer delay\r\n      console.log(\"â±ï¸ Scheduling next message\");\r\n      setTimeout(() => {\r\n        continueConversation(nextSender);\r\n      }, 1000); // Longer delay for readability\r\n    } catch (err) {\r\n      console.error(\"ðŸ’¥ Fatal error in conversation flow:\", err);\r\n      setError(\"Conversation error: \" + (err.message || \"Unknown error\"));\r\n      setIsSimulating(false);\r\n    }\r\n  };\r\n  \r\n  // Make sure we're catching and displaying all errors\r\n  useEffect(() => {\r\n    // Add a global error handler\r\n    const handleError = (error) => {\r\n      console.error(\"Global error:\", error);\r\n      setError(\"An error occurred: \" + error.message);\r\n      setIsSimulating(false);\r\n    };\r\n    \r\n    window.addEventListener('error', handleError);\r\n    return () => window.removeEventListener('error', handleError);\r\n  }, []);\r\n  \r\n  return (\r\n    <Container maxWidth=\"md\">\r\n      <Box sx={{ py: 4 }}>\r\n        <Button \r\n          startIcon={<ArrowBackIcon />} \r\n          onClick={() => navigate('/')}\r\n          sx={{ mb: 3 }}\r\n        >\r\n          Back to Home\r\n        </Button>\r\n        \r\n        <Typography variant=\"h4\" gutterBottom textAlign=\"center\">\r\n          AI Match Simulation\r\n        </Typography>\r\n        \r\n        <Typography variant=\"body1\" color=\"text.secondary\" paragraph textAlign=\"center\">\r\n          Watch as two AI personalities have a conversation to see how our matching system works. \r\n          Each AI has a distinct personality and communication style.\r\n        </Typography>\r\n        \r\n        {error && (\r\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n        \r\n        {/* Start button */}\r\n        {!conversationStarted && (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', my: 4 }}>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              startIcon={<PlayArrowIcon />}\r\n              onClick={() => {\r\n                // Just call startConversation directly - don't add test messages\r\n                startConversation();\r\n              }}\r\n              sx={{ py: 2, px: 4 }}\r\n            >\r\n              Start AI Conversation\r\n            </Button>\r\n          </Box>\r\n        )}\r\n        \r\n        {/* Chat header with profiles */}\r\n        {conversationStarted && (\r\n          <>\r\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2, mt: 4 }}>\r\n              {personalities.map((personality, index) => (\r\n                <Box key={index} sx={{ display: 'flex', alignItems: 'center' }}>\r\n                  <Avatar sx={{ bgcolor: personality.color, mr: 1 }}>\r\n                    {personality.avatar}\r\n                  </Avatar>\r\n                  <Typography variant=\"subtitle1\">\r\n                    {personality.name}\r\n                  </Typography>\r\n                </Box>\r\n              ))}\r\n            </Box>\r\n            \r\n            {/* Chat container */}\r\n            <Paper \r\n              elevation={3} \r\n              sx={{ \r\n                height: '60vh', \r\n                overflowY: 'auto',\r\n                p: 2,\r\n                backgroundColor: '#f5f5f5'\r\n              }}\r\n            >\r\n              {messages.map((message, index) => (\r\n                <Box \r\n                  key={index}\r\n                  sx={{\r\n                    display: 'flex',\r\n                    justifyContent: message.sender === 0 ? 'flex-start' : 'flex-end',\r\n                    mb: 2\r\n                  }}\r\n                >\r\n                  <Box\r\n                    sx={{\r\n                      maxWidth: '70%',\r\n                      bgcolor: message.sender === 0 ? personalities[0].color : personalities[1].color,\r\n                      color: 'white',\r\n                      p: 2,\r\n                      borderRadius: 2\r\n                    }}\r\n                  >\r\n                    <Typography variant=\"body1\">\r\n                      {message.text === \"...\" ? (\r\n                        <CircularProgress size={16} color=\"inherit\" />\r\n                      ) : (\r\n                        <>\r\n                          <Typography variant=\"caption\" sx={{ display: 'block', opacity: 0.8, mb: 0.5 }}>\r\n                            {personalities[message.sender].name}\r\n                          </Typography>\r\n                          {message.text}\r\n                        </>\r\n                      )}\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              ))}\r\n              <div ref={messagesEndRef} />\r\n            </Paper>\r\n            \r\n            {/* Progress indicator */}\r\n            <Box sx={{ display: 'flex', justifyContent: 'space-between', mt: 2 }}>\r\n              <Typography variant=\"body2\">\r\n                {personalities[0].name}: {messageCount[0]}/25 messages\r\n              </Typography>\r\n              <Typography variant=\"body2\">\r\n                {personalities[1].name}: {messageCount[1]}/25 messages\r\n              </Typography>\r\n            </Box>\r\n            \r\n            {!isSimulating && conversationStarted && (\r\n              <Box sx={{ mt: 3, textAlign: 'center' }}>\r\n                <Typography variant=\"h6\" gutterBottom>\r\n                  Conversation Complete!\r\n                </Typography>\r\n                <Button \r\n                  variant=\"contained\" \r\n                  color=\"primary\"\r\n                  onClick={() => navigate('/create-profile')}\r\n                  sx={{ mt: 2, mr: 2 }}\r\n                >\r\n                  Create Your Profile\r\n                </Button>\r\n                <Button \r\n                  variant=\"outlined\" \r\n                  color=\"secondary\"\r\n                  onClick={startConversation}\r\n                  sx={{ mt: 2 }}\r\n                >\r\n                  Start New Conversation\r\n                </Button>\r\n              </Box>\r\n            )}\r\n          </>\r\n        )}\r\n      </Box>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default AIChatSimulation; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}